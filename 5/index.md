# 물리적 저장 장치 시스템

## RAID
RAID: Redundant Arrays of Independent Disk. 서로 독립적인 디스크에 중복된 데이터를 넣는 것을 의미한다.
디스크 드라이브의 용량은 빠르게 증가하나, 데이터 저장 요구량도 매우 빠르게 증가하고 있다.
따라서 데이터를 저장하는 데에 많은 수의 디스크가 필요하다.

많은 디스크를 갖고, 병렬로 운영한다면 데이터의 읽기/쓰기 속도를 향상시킬 수 있다.
독립적 읽기/쓰기도 병렬로 수행할 수 있다.
중복된 정보를 여러 곳에 저장하면 신뢰성을 향상시킬 수 있다.

이러한 장점들로, RAID를 사용한다. 경제적인 이유보다는 높은 신뢰성과 성능때문이다. 또한 관리/작업도 쉬워진다.


### 중복에 의한 신뢰성 향상

MTTF = Mean Time To Fail: 디스크가 실패할 때까지 걸리는 평균 시간   
HDD 제조 업체의 주장에 따르면, 오늘날 디스크의 MTTF범위는 500,000 시간 ~ 1,200,000 시간(약 57년 ~ 136년)이다.
신품을 기준으로 측정되었으며, 사용할수록 MTTF는 낮아진다. MTTF가 디스크의 실제 수명을 나타내지는 않는다.
디스크의 대부분은 기대 수명이 5년 정도에 불과하다.



여기서, 디스크의 MTTF가 100,000 시간(약 11년)이라고 가정하자. 그리고, 100개의 디스크로 된 하나의 배열이 있다고 하자.
이 때, 이 배열에서 일부 디스크가 실패할 MTTF는 1,000시간(약 42일)이다.
각 데이터를 한 번씩만 저장한다면, 굉장히 잦은 손실이 일어날 것이다.
이 정도의 손실은 문제가 있는 수준이다.



중복을 사용하면 이를 해결할 수 있다. 디스크가 실패하더라도 복원할 수 있도록, 여분의 정보를 저장한다.
이 방법을 사용하면 디스크가 실패해도 데이터는 날아가지 않는다.
따라서 실제 데이터를 못 쓰게 되는 경우로 MTTF를 계산할 경우, MTTF는 늘어나게 된다.


가장 간단한 방식의 중복은 미러링으로, 디스크 전체를 복사하는 것이다.
논리 디스크는 두 개의 물리 디스크로 구성되며, 두 디스크 모두에 쓰게 된다.
둘 중 하나가 실패해도, 다른 하나로부터 데이터를 읽어올 수 있다.
따라서 둘 다 실패하는 것(정확히는 복구가 일어나기 전에 둘 다 실패하는 것)이 진짜 실패이며, 하나만 실패하는 것은 신경쓸 필요가 없다.



이 논리 디스크의 MTTF는 당연히 개별 물리 디스크의 MTTF의 영향을 받는다. 또, 데이터 복구 평균 시간에도 영향을 받는다.
- 데이터 복구 평균 시간: 실패한 디스크를 교체해서 데이터를 다시 저장하는데 걸리는 평균 시간
MTTF가 100,000 시간이며, 데이터 복구 평균 시간이 10시간이라면 데이터 손실 평균시간은 57,000년이 된다고 한다.
